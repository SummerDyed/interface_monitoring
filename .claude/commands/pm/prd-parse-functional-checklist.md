# PRD功能完整性挖掘检查清单

## 基于"不遗漏任何有价值的功能"原则的功能挖掘机制

### 核心原则
**聚焦业务功能本身**，确保PRD中每个有价值的功能点都被完整识别并转化为技术实现

---

## 1. 功能完整性挖掘检查 (3b步骤)

### 1.1 显式功能清单提取
**执行方式**：从PRD中逐句提取所有明确提到的功能点

- [ ] **核心功能识别**
  - 记录每个明确表述的功能
  - 识别功能名称和描述
  - 标注功能的重要程度（核心/重要/次要）
  - 提取功能的目标和价值

- [ ] **功能特性提取**
  - 每个功能有哪些具体特性？
  - 有哪些操作步骤和流程？
  - 有哪些输入、输出和约束？

### 1.2 功能变体和扩展识别
**挖掘方式**：基于每个核心功能，识别可能的变体和扩展

- [ ] **功能变体挖掘**
  - 相同功能在不同场景下的变体
  - 功能的基础版本 vs 高级版本
  - 手动操作 vs 自动操作
  - 批量处理 vs 单次处理
  - 不同用户角色的功能差异

- [ ] **功能扩展点识别**
  - 功能可能需要哪些扩展？
  - 有哪些自定义配置项？
  - 有哪些可选参数和设置？
  - 支持哪些格式、协议、接口？

### 1.3 功能边界情况挖掘
**挖掘方式**：分析功能在异常、边界、特殊情况下如何处理

- [ ] **异常处理**
  - 功能在遇到错误时如何处理？
  - 有哪些重试和恢复机制？
  - 如何处理无效输入？
  - 如何处理系统异常？

- [ ] **边界情况**
  - 最大/最小值处理
  - 空值和空列表处理
  - 并发和多用户同时操作
  - 网络异常和超时处理
  - 权限不足和访问拒绝

- [ ] **特殊场景**
  - 新用户首次使用
  - 大量数据处理场景
  - 跨页面/跨会话操作
  - 数据同步和一致性
  - 批量操作和事务处理

### 1.4 功能依赖关系挖掘
**挖掘方式**：分析功能间的依赖、关联、影响

- [ ] **前置依赖**
  - 使用此功能前必须完成什么？
  - 需要哪些前置数据或条件？
  - 需要调用哪些其他功能？

- [ ] **后置影响**
  - 使用此功能后会产生什么影响？
  - 会修改哪些数据或状态？
  - 会触发哪些其他操作？

- [ ] **关联功能**
  - 此功能与哪些功能配合使用？
  - 哪些功能的子功能或组成部分？
  - 哪些功能的替代或备选方案？

### 1.5 API接口设计挖掘 【强制验证项】
**挖掘方式**：从PRD中提取所有API接口设计，确保API完整性

**🔴 高风险验证规则**：
- 每个功能模块必须对应完整的API接口设计
- 所有API必须映射到具体的微服务
- API覆盖率必须达到100%，缺失则停止执行

- [x] **显式API提取** 【强制】
  - 每个功能模块的API接口清单（必填）
  - API地址、请求方法、参数定义（必填）
  - API归属微服务划分（必填）
  - API功能说明和业务逻辑（必填）

- [x] **API分类统计** 【强制】
  - 按功能模块统计API数量（必填）
  - 区分核心API、辅助API、预留API（必填）
  - 识别API依赖关系和调用链路（必填）
  - 统计API覆盖率（功能→API映射）（必填）

- [x] **API设计深度** 【强制】
  - 请求参数类型、必填项、验证规则（必填）
  - 响应数据格式、错误码定义（必填）
  - 业务逻辑说明、异常处理（必填）
  - 安全验证、权限控制机制（必填）

- [x] **API接口完整性** 【强制】
  - CRUD操作是否完整（Create/Read/Update/Delete）（必填）
  - 查询接口是否支持分页、筛选、排序（必填）
  - 批量操作接口是否存在（必填）
  - 特殊接口（登录、认证、统计等）（必填）

### 1.6 DDL数据模型挖掘 【强制验证项】
**挖掘方式**：从PRD中提取所有数据库表设计，确保数据模型完整性

**🔴 高风险验证规则**：
- 所有业务数据必须对应完整的数据表设计
- 每张表必须有详细的字段定义、索引设计
- DDL覆盖率必须达到100%，缺失则停止执行

- [x] **显式DDL提取** 【强制】
  - 每个数据表的字段定义（必填）
  - 数据类型、长度、约束条件（必填）
  - 主键、外键、索引设计（必填）
  - 表关系和关联逻辑（必填）

- [x] **数据表分类统计** 【强制】
  - 按业务模块统计表数量（必填）
  - 区分核心表、关联表、日志表（必填）
  - 识别表依赖关系和外键约束（必填）
  - 统计数据表覆盖率（功能→表映射）（必填）

- [x] **数据模型设计深度** 【强制】
  - 字段必填性、默认值设置（必填）
  - 数据完整性约束（唯一性、非空等）（必填）
  - 索引策略（主键、唯一、普通索引）（必填）
  - 表备注和字段说明完整性（必填）

- [x] **数据模型完整性** 【强制】
  - CRUD操作的数据支持是否完整（必填）
  - 查询优化需要的索引是否存在（必填）
  - 数据隔离字段设计（如多租户tenant_id）（必填）
  - 审计字段设计（创建时间、更新时间等）（必填）

### 1.7 功能价值挖掘
**挖掘方式**：识别每个功能的业务价值和用户价值

- [ ] **业务价值识别**
  - 此功能解决什么业务问题？
  - 如何为业务目标做贡献？
  - 预期产生什么效益？
  - 如何衡量功能成功？

- [ ] **用户价值识别**
  - 为用户解决什么问题？
  - 提升什么用户体验？
  - 节省什么操作步骤/时间？
  - 降低什么使用门槛？

- [ ] **价值优先级**
  - 此功能对业务成功的关键程度？
  - 用户对此功能的依赖程度？
  - 实现此功能的成本效益？

---

## 2. 功能特性完整性检查 (3c步骤)

### 2.1 功能粒度分析
- [ ] **颗粒度是否合适**
  - 功能是否拆解到合适粒度？
  - 是否可以进一步分解？
  - 是否需要合并相关功能？

- [ ] **功能边界清晰**
  - 每个功能的作用范围是否明确？
  - 功能之间的重叠和交叉？
  - 功能归属是否合理？

### 2.2 功能特性深度检查
- [ ] **操作流程完整性**
  - 每个操作的具体步骤？
  - 每步的输入、输出、验证？
  - 流程分支和异常路径？

- [ ] **数据处理完整性**
  - 需要处理哪些数据？
  - 数据的来源、去向、格式？
  - 数据转换和处理逻辑？

- [ ] **业务规则完整性**
  - 有哪些业务规则和约束？
  - 规则的优先级和冲突处理？
  - 规则的例外和特殊处理？

### 2.3 功能扩展性检查
- [ ] **配置能力**
  - 有哪些可配置项？
  - 配置如何影响功能行为？
  - 配置验证和默认值？

- [ ] **扩展接口**
  - 是否提供扩展点？
  - 支持哪些插件或扩展？
  - API和集成能力？

---

## 3. 功能价值优先级评估 (3d步骤)

### 3.1 价值维度评估
**为每个功能进行多维度价值评估**

- [ ] **用户价值**
  - 用户刚需程度：高/中/低
  - 用户使用频次：高/中/低
  - 用户体验提升：高/中/低
  - 学习成本：低/中/高

- [ ] **业务价值**
  - 收入贡献：直接/间接/无
  - 成本节约：有/无
  - 风险降低：高/中/低
  - 竞争优势：有/无

- [ ] **战略价值**
  - 对核心业务的支持程度：高/中/低
  - 对长期目标的贡献度：高/中/低
  - 对生态系统的价值：高/中/低

### 3.2 价值排序和分层
- [ ] **核心功能** (P0)
  - 必须实现的功能
  - 缺少则无法使用系统
  - 最高优先级，立即实现

- [ ] **重要功能** (P1)
  - 大大提升用户体验
  - 有明显业务价值
  - 第二优先级，核心功能后实现

- [ ] **增值功能** (P2)
  - 锦上添花的功能
  - 有一定价值但不关键
  - 第三优先级，资源允许时实现

---

## 4. 功能遗漏风险评估 (4a步骤)

### 4.1 功能覆盖率检查
- [ ] **显式功能覆盖率**
  - PRD中明确提到的功能是否100%覆盖？
  - 是否有功能描述但未被实现？

- [ ] **隐性功能覆盖率**
  - 通过挖掘发现的功能是否已纳入？
  - 功能变体和扩展是否已考虑？

### 4.2 价值完整性检查
- [ ] **关键价值点覆盖**
  - 所有P0功能是否都已纳入Epic？
  - 高价值功能是否有充分实现计划？

- [ ] **价值链完整性**
  - 功能的依赖关系是否完整？
  - 价值实现链路是否被打断？

### 4.3 风险识别
- [ ] **高风险遗漏**
  - 遗漏的核心功能（影响基本可用性）
  - 遗漏的关键价值点（影响业务成功）

- [ ] **中风险遗漏**
  - 遗漏的重要功能（影响用户体验）
  - 遗漏的价值扩展点（影响竞争力）

- [ ] **低风险遗漏**
  - 遗漏的增值功能（影响满意度）
  - 遗漏的功能细节（影响完整性）

---

## 5. Epic功能映射验证 (4b步骤)

### 5.1 功能-任务映射检查
- [ ] **每个功能都有对应实现任务**
  - P0功能 → 具体实现任务
  - P1功能 → 具体实现任务
  - P2功能 → 具体实现任务或延后计划

- [ ] **功能特性完整映射**
  - 功能变体 → 相应实现任务
  - 边界情况 → 异常处理任务
  - 配置项 → 参数化实现任务

### 5.2 价值实现检查
- [ ] **价值实现路径清晰**
  - 每个功能的价值如何实现？
  - 有哪些指标衡量价值实现？
  - 价值实现的验证方法？

- [ ] **风险缓解措施**
  - 如何降低遗漏风险？
  - 如何确保价值实现？
  - 有哪些备用方案？

---

## 6. 输出报告模板

### 6.1 功能完整性报告
```
📋 功能完整性分析完成

📊 功能统计：
- 显式功能数：X 个
- 挖掘功能数：X 个 (变体 X 个, 扩展 X 个, 边界 X 个)
- **总功能数：X 个** (100% 识别覆盖)

🎯 功能分层：
- P0 核心功能：X 个 (X%)
- P1 重要功能：X 个 (X%)
- P2 增值功能：X 个 (X%)

⚠️ 价值完整性：
- 关键价值点：X/X ✅
- 业务价值实现路径：X/X ✅
- 用户价值实现路径：X/X ✅

💡 遗漏风险评估：
- 高风险遗漏：0 个 ✅
- 中风险遗漏：X 个 (需评估是否补充)
- 低风险遗漏：X 个 (可选择性补充)
```

### 6.2 Epic覆盖验证报告
```
✅ Epic功能映射检查完成

📋 映射完整性：
- 功能→任务映射：X/X ✅
- 功能变体实现：X/X ✅
- 边界情况处理：X/X ✅
- 异常处理机制：X/X ✅

🎯 价值实现验证：
- P0功能实现计划：完整 ✅
- P1功能实现计划：完整 ✅
- P2功能实现计划：已规划 ✅
- 风险缓解措施：已制定 ✅

📈 综合评估：
- 功能完整性：100% ✅
- 价值实现度：X% (目标≥95%)
- 风险控制度：高 ✅
```

---

## 使用指南

1. **功能提取阶段**：逐句分析PRD，提取所有显式功能
2. **功能挖掘阶段**：基于核心功能，挖掘变体、扩展、边界情况
3. **价值评估阶段**：为每个功能评估业务价值和用户价值
4. **风险评估阶段**：识别遗漏风险和高价值功能
5. **Epic映射阶段**：确保所有有价值功能都有实现计划
6. **验证阶段**：执行完整性检查和价值实现验证

**关键原则**：
- **宁滥勿缺**：宁可多挖掘功能，不可遗漏有价值功能
- **价值导向**：重点确保高价值功能的完整性
- **系统性**：考虑功能间的依赖和关联关系
- **前瞻性**：不仅考虑当前需求，也考虑未来扩展
- **🔴 强制性**：API接口和DDL数据模型必须100%覆盖，缺失则停止执行

---

## 强制验证机制

### 高风险项强制验证规则

**🔴 API接口设计** (强制100%覆盖)：
- **验证标准**：每个功能模块必须有完整的API接口设计
- **检查项**：
  - [ ] API地址、请求方法完整
  - [ ] 参数定义、响应格式完整
  - [ ] 微服务归属明确
  - [ ] CRUD操作完整性
- **执行规则**：缺失则停止执行，必须返回PRD要求补充

**🔴 DDL数据模型** (强制100%覆盖)：
- **验证标准**：所有业务数据必须有完整的数据表设计
- **检查项**：
  - [ ] 数据表字段定义完整
  - [ ] 索引设计、约束条件完整
  - [ ] 表关系、关联逻辑清晰
  - [ ] 多租户隔离字段设计
- **执行规则**：缺失则停止执行，必须返回PRD要求补充

### 验证检查流程

```
1. 功能提取 → 显式功能清单
2. 功能挖掘 → 变体、扩展、边界情况
3. **API验证** → 检查所有功能对应的API接口
4. **DDL验证** → 检查所有数据对应的表设计
5. 价值评估 → P0/P1/P2优先级分层
6. 风险评估 → 高/中/低风险识别
7. Epic映射 → 所有有价值功能都有实现计划
8. 覆盖率验证 → 生成完整性报告
```

### 验证报告模板

**API覆盖率报告**：
```
✅ API完整性验证通过

功能模块: X个
API接口总数: Y个
- 核心API: X个
- 辅助API: Y个
- 预留API: Z个

覆盖率: 100% (Y/Y)
状态: 通过 ✅
```

**DDL覆盖率报告**：
```
✅ DDL完整性验证通过

数据表总数: X张
字段总数: Y个
索引总数: Z个

覆盖率: 100% (X/X)
状态: 通过 ✅
```

### 失败处理机制

**API缺失**：
- 状态：🔴 停止执行
- 操作：返回PRD，要求补充API接口设计
- 标准：必须提供完整的API文档（端点、参数、响应）

**DDL缺失**：
- 状态：🔴 停止执行
- 操作：返回PRD，要求补充数据字典
- 标准：必须提供完整的表设计（字段、索引、约束）

**覆盖率<100%**：
- 状态：🟡 警告，继续执行但记录缺失项
- 操作：生成详细缺失清单
- 建议：在Epic中标记为"待补充"或返回PRD要求完善

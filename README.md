# æ¥å£ç›‘æ§è„šæœ¬

## é¡¹ç›®ç®€ä»‹

æ¥å£ç›‘æ§è„šæœ¬æ˜¯ä¸€ä¸ªè½»é‡çº§ã€æ˜“é…ç½®çš„æ¥å£è¿é€šæ€§ç›‘æ§å·¥å…·ã€‚åŸºäºPythonå¼€å‘ï¼Œé€šè¿‡å®šæ—¶ä»»åŠ¡æœºåˆ¶è‡ªåŠ¨æ‰«ææ¥å£æ–‡æ¡£ã€æ‰§è¡Œæ¥å£è¿é€šæ€§æµ‹è¯•ã€ç›‘æ§å¼‚å¸¸çŠ¶æ€ï¼Œå¹¶åœ¨å‘ç°é—®é¢˜æ—¶é€šè¿‡ä¼ä¸šå¾®ä¿¡æœºå™¨äººåŠæ—¶æ¨é€å‘Šè­¦ã€‚

## æ ¸å¿ƒåŠŸèƒ½

- ğŸ“¡ **æ¥å£ç›‘æ§**: è‡ªåŠ¨æ‰«ææ¥å£æ–‡æ¡£ï¼Œæ‰§è¡Œæ‰¹é‡ç›‘æ§
- ğŸ” **è®¤è¯ç®¡ç†**: Tokenè‡ªåŠ¨è·å–ã€ç¼“å­˜å’Œåˆ·æ–°
- â° **å®šæ—¶ä»»åŠ¡**: 15åˆ†é’Ÿé—´éš”è‡ªåŠ¨ç›‘æ§ï¼ˆå¯é…ç½®ï¼‰
- ğŸ“Š **ç»“æœåˆ†æ**: å¼‚å¸¸çŠ¶æ€è¯†åˆ«ï¼ˆ500/404/503/è¶…æ—¶/ç½‘ç»œé”™è¯¯ï¼‰
- ğŸ’¬ **ä¼ä¸šå¾®ä¿¡æ¨é€**: å®æ—¶å‘Šè­¦é€šçŸ¥
- ğŸš€ **å¹¶å‘æ‰§è¡Œ**: æ”¯æŒå¤šçº¿ç¨‹å¹¶å‘ç›‘æ§

## æŠ€æœ¯æ ˆ

- Python 3.7+
- requests (HTTPè¯·æ±‚)
- schedule (å®šæ—¶ä»»åŠ¡)
- pyyaml (é…ç½®ç®¡ç†)
- concurrent.futures (å¹¶å‘æ§åˆ¶)

## é¡¹ç›®ç»“æ„

```
interface_monitoring/
â”œâ”€â”€ src/                    # æºç ç›®å½•
â”‚   â”œâ”€â”€ config/             # é…ç½®ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ monitor/            # ç›‘æ§æ‰§è¡Œæ¨¡å—
â”‚   â”œâ”€â”€ auth/              # è®¤è¯ç®¡ç†æ¨¡å—
â”‚   â”œâ”€â”€ scanner/            # æ¥å£æ‰«ææ¨¡å—
â”‚   â”œâ”€â”€ analyzer/           # ç»“æœåˆ†ææ¨¡å—
â”‚   â””â”€â”€ notifier/           # æ¨é€é€šçŸ¥æ¨¡å—
â”œâ”€â”€ config.yaml             # ä¸»é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt        # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ logs/                   # æ—¥å¿—ç›®å½•
â”œâ”€â”€ Interface-pool/         # æ¥å£æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ user/              # ç”¨æˆ·æœåŠ¡æ¥å£
â”‚   â”œâ”€â”€ nurse/             # æŠ¤å£«æœåŠ¡æ¥å£
â”‚   â””â”€â”€ admin/             # ç®¡ç†å‘˜æœåŠ¡æ¥å£
â”œâ”€â”€ scripts/               # è„šæœ¬ç›®å½•
â”‚   â”œâ”€â”€ install.sh         # å®‰è£…è„šæœ¬
â”‚   â”œâ”€â”€ start.sh           # å¯åŠ¨è„šæœ¬
â”‚   â””â”€â”€ stop.sh            # åœæ­¢è„šæœ¬
â””â”€â”€ tests/                 # æµ‹è¯•ç›®å½•
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
chmod +x scripts/install.sh
./scripts/install.sh
```

### 2. é…ç½®å‚æ•°

ç¼–è¾‘ `config.yaml` æ–‡ä»¶ï¼Œä¿®æ”¹ä»¥ä¸‹å…³é”®é…ç½®ï¼š

- **ä¼ä¸šå¾®ä¿¡Webhookåœ°å€**: `wechat.webhook_url`
- **æœåŠ¡è®¤è¯ä¿¡æ¯**: `services.*.{username, password}`
- **ç›‘æ§é—´éš”**: `monitor.interval`

### 3. å¯åŠ¨æœåŠ¡

```bash
./scripts/start.sh
```

### 4. åœæ­¢æœåŠ¡

```bash
./scripts/stop.sh
```

## é…ç½®è¯´æ˜

### ç›‘æ§é…ç½®

```yaml
monitor:
  interval: 15        # ç›‘æ§é—´éš”ï¼ˆåˆ†é’Ÿï¼‰
  timeout: 10        # è¯·æ±‚è¶…æ—¶ï¼ˆç§’ï¼‰
  concurrent_threads: 5  # å¹¶å‘çº¿ç¨‹æ•°
  retry_times: 3     # é‡è¯•æ¬¡æ•°
```

### ä¼ä¸šå¾®ä¿¡é…ç½®

```yaml
wechat:
  webhook_url: "https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_KEY"
  enabled: true
  at_users: ["user1", "user2"]
  message_format: "detail"
```

### æœåŠ¡è®¤è¯é…ç½®

```yaml
services:
  user:
    token_url: "https://api.example.com/user/token"
    username: "your_username"
    password: "your_password"
```

## æ¥å£æ–‡æ¡£æ ¼å¼

åœ¨ `Interface-pool/` ç›®å½•ä¸‹æŒ‰æœåŠ¡ç±»å‹ç»„ç»‡æ¥å£æ–‡æ¡£ï¼Œæ”¯æŒJSONå’ŒYAMLæ ¼å¼ï¼š

```json
{
  "name": "æ¥å£åç§°",
  "method": "GET|POST|PUT|DELETE",
  "url": "/api/v1/path",
  "headers": {
    "Content-Type": "application/json"
  },
  "body": {
    "key": "value"
  },
  "description": "æ¥å£æè¿°"
}
```

## æ—¥å¿—æŸ¥çœ‹

```bash
# ç›‘æ§æ—¥å¿—
tail -f logs/monitor.log

# é”™è¯¯æ—¥å¿—
tail -f logs/error.log
```

## å¼€å‘æŒ‡å—

### è¿è¡Œæµ‹è¯•

```bash
pytest tests/ --cov=src
```

### ä»£ç æ ¼å¼åŒ–

```bash
black src/
pylint src/
```

## å¸¸è§é—®é¢˜

**Q: å¦‚ä½•æ·»åŠ æ–°çš„æœåŠ¡ç±»å‹ï¼Ÿ**

A: åœ¨ `config.yaml` çš„ `services` èŠ‚ç‚¹ä¸‹æ·»åŠ æ–°çš„æœåŠ¡é…ç½®ï¼Œå¹¶åœ¨ `Interface-pool/` ä¸‹åˆ›å»ºå¯¹åº”çš„ç›®å½•ã€‚

**Q: å¦‚ä½•è‡ªå®šä¹‰ç›‘æ§é—´éš”ï¼Ÿ**

A: ä¿®æ”¹ `config.yaml` ä¸­çš„ `monitor.interval` é…ç½®é¡¹ï¼Œå•ä½ä¸ºåˆ†é’Ÿã€‚

**Q: ç›‘æ§å¤±è´¥å¦‚ä½•æ’æŸ¥ï¼Ÿ**

A: æŸ¥çœ‹ `logs/error.log` æ–‡ä»¶ï¼Œæ£€æŸ¥é”™è¯¯æ—¥å¿—ä¿¡æ¯ã€‚

## è®¸å¯è¯

MIT License

## ä½œè€…

å¼€å‘å›¢é˜Ÿ

## æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-01-26)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- æ”¯æŒåŸºç¡€æ¥å£ç›‘æ§åŠŸèƒ½
- æ”¯æŒä¼ä¸šå¾®ä¿¡å‘Šè­¦
- æ”¯æŒå¤šæœåŠ¡è®¤è¯ç®¡ç†
